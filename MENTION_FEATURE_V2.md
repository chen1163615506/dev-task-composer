# @ 提及功能使用指南 v2.0

## 功能概述

全新的 @ 提及功能让您可以在输入框中快速引用各种资源，包括**需求**、**文件**和**工具**，提升 AI 对话的上下文准确性。

## 资源分类

### 1. 需求 📋
展示所有需求列表，包括：
- 需求标题
- 需求描述
- 关联的任务信息

**示例需求：**
- 优化用户登录流程
- 实现代码审查功能

### 2. 文件 📄
收藏夹中的文档和文件：
- 开启你和AI共用的收藏夹.md
- 技术架构设计文档
- React 最佳实践

### 3. 工具 🔧
集成的各类开发工具：
- **飞书云文档** - 搜索和引用飞书文档
- **Wiki** - 内部知识库文档
- **落兵台** - API 接口文档和测试
- **GitLab** - 代码仓库和 MR 管理

## 界面设计

### 搜索框
- 占位符：**搜索需求/文件/工具**
- 支持实时搜索过滤
- 匹配标题和描述

### 标签页切换

┌─────────────────────────────────┐
│  全部  │  需求  │  文件  │  工具  │
└─────────────────────────────────┘


### 分组显示
- **需求列表** - 显示所有需求
- **收藏夹文件** - 常用文档
- **工具** - 集成工具列表

## 使用方法

### 1. 触发 @ 菜单
在输入框中输入 `@` 符号，自动弹出资源选择菜单

### 2. 搜索资源
- 在搜索框中输入关键词
- 实时过滤匹配的资源
- 支持标题和描述的模糊搜索

### 3. 切换分类
点击顶部的标签页快速筛选：
- **全部** - 显示所有资源
- **需求** - 仅显示需求列表
- **文件** - 仅显示文档文件
- **工具** - 仅显示集成工具

### 4. 选择资源
- 点击任意资源项
- 资源会被插入到输入框的 @ 位置
- 选中的资源会以标签形式显示在输入框上方

### 5. 管理已选资源
- 已选资源显示为彩色标签
- 点击标签上的 × 可以移除
- 不同类型的资源有不同的颜色：
  - 🟣 需求 - 紫色
  - 🔵 文件 - 蓝色
  - 🟠 工具 - 橙色

## 集成位置

### 1. 首页 (HomePage)
- 主任务输入框
- 支持在创建任务时引用资源
- 提示文本：`请详细描述您的开发需求... (输入 @ 可引用资源)`

### 2. 任务拆解页 (TaskDecomposePage)
- AI 对话输入框
- 支持在对话中引用资源
- 提示文本：`描述您想要添加或修改的任务... (输入 @ 可引用资源)`

## 技术实现

### 核心组件
`src/components/MentionInput.tsx`

### 资源类型定义

interface MentionResource {
  id: string;
  type: 'requirement' | 'file' | 'tool';
  title: string;
  description?: string;
  icon?: React.ReactNode;
  category?: string;
  data?: Record<string, unknown>;
}


### 数据来源
- **需求列表** - 从 `mockRequirements` 动态加载
- **文件列表** - 静态配置的收藏夹文件
- **工具列表** - 集成的开发工具配置

## 快捷键

- `@` - 触发资源选择菜单
- `Esc` - 关闭菜单
- `↑` `↓` - 在资源列表中导航
- `Enter` - 选择当前高亮的资源

## 后续扩展计划

### 需求模块
- [ ] 连接真实的需求管理系统
- [ ] 支持需求详情预览
- [ ] 显示需求状态和进度

### 文件模块
- [ ] 支持文件上传和管理
- [ ] 文件内容预览
- [ ] 最近使用文件记录

### 工具模块
- [ ] 飞书文档 API 集成
- [ ] Wiki 搜索集成
- [ ] 落兵台 API 浏览和测试
- [ ] GitLab MR 和 Issue 集成

### 通用功能
- [ ] 资源拖拽排序
- [ ] 自定义资源分组
- [ ] 资源使用统计
- [ ] 智能推荐常用资源
