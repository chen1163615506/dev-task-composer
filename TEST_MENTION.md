# @ 提及功能测试指南

## 测试步骤

### 1. 启动开发服务器

npm run dev


### 2. 测试首页 @ 功能

#### 步骤：
1. 打开首页 (http://localhost:8080)
2. 在主输入框中输入 `@`
3. 应该看到弹出的资源选择菜单

#### 预期结果：
- ✅ 菜单显示在输入框下方
- ✅ 显示搜索框："搜索需求/文件/工具"
- ✅ 显示四个标签页：全部、需求、文件、工具
- ✅ 显示分组资源列表

### 3. 测试资源选择

#### 步骤：
1. 点击任意资源（例如："优化用户登录流程"）
2. 观察输入框上方

#### 预期结果：
- ✅ 输入框上方显示一个带背景的区域
- ✅ 区域内显示选中的资源标签
- ✅ 标签包含：图标 + 标题 + × 按钮
- ✅ 标签颜色根据类型不同：
  - 🟣 需求 - 紫色背景
  - 🔵 文件 - 蓝色背景
  - 🟠 工具 - 橙色背景

### 4. 测试多个资源选择

#### 步骤：
1. 再次输入 `@`
2. 选择另一个资源（例如："飞书云文档"）
3. 观察标签区域

#### 预期结果：
- ✅ 显示两个标签
- ✅ 标签横向排列，自动换行
- ✅ 每个标签都可以独立删除

### 5. 测试删除资源

#### 步骤：
1. 点击任意标签上的 × 按钮

#### 预期结果：
- ✅ 该标签被移除
- ✅ 其他标签保持不变
- ✅ 如果删除所有标签，标签区域消失

### 6. 测试搜索功能

#### 步骤：
1. 输入 `@`
2. 在搜索框中输入 "登录"

#### 预期结果：
- ✅ 只显示包含"登录"的资源
- ✅ 实时过滤，无需按回车

### 7. 测试标签页切换

#### 步骤：
1. 输入 `@`
2. 点击"需求"标签页

#### 预期结果：
- ✅ 只显示需求类型的资源
- ✅ "需求"标签页高亮显示
- ✅ 切换到其他标签页时，显示对应类型的资源

### 8. 测试任务拆解页

#### 步骤：
1. 选择一个仓库和分支
2. 输入任务描述，点击发送
3. 进入任务拆解页
4. 在左侧聊天输入框中输入 `@`

#### 预期结果：
- ✅ 同样显示资源选择菜单
- ✅ 选择资源后显示在输入框上方
- ✅ 功能与首页一致

## 常见问题排查

### 问题1：选择资源后，标签没有显示

**可能原因：**
- 组件状态未更新
- CSS 样式问题

**排查步骤：**
1. 打开浏览器开发者工具 (F12)
2. 查看 Console 是否有错误
3. 检查 Elements 面板，查看是否有标签 DOM 元素生成

### 问题2：标签显示但样式不正确

**可能原因：**
- Tailwind CSS 类名未生效
- 图标未正确渲染

**排查步骤：**
1. 检查标签元素的 class 属性
2. 查看是否有 CSS 冲突

### 问题3：@ 菜单位置不正确

**可能原因：**
- 菜单定位计算错误
- 滚动位置影响

**排查步骤：**
1. 检查菜单的 style 属性中的 top 和 left 值
2. 尝试在不同位置输入 @

## 视觉效果参考

### 标签区域样式

┌─────────────────────────────────────────────┐
│  🟣 优化用户登录流程 ×  🟠 飞书云文档 ×    │
└─────────────────────────────────────────────┘
┌─────────────────────────────────────────────┐
│                                             │
│  请详细描述您的开发需求...                  │
│                                             │
└─────────────────────────────────────────────┘


### 资源选择菜单

┌─────────────────────────────────────────────┐
│  搜索需求/文件/工具                          │
├─────────────────────────────────────────────┤
│  全部  │  需求  │  文件  │  工具            │
├─────────────────────────────────────────────┤
│  需求列表                                    │
│  📋 优化用户登录流程                         │
│  📋 实现代码审查功能                         │
│                                             │
│  收藏夹文件                                  │
│  📄 开启你和AI共用的收藏夹.md                │
│  📄 技术架构设计文档                         │
│                                             │
│  工具                                        │
│  飞 飞书云文档                               │
│  📚 Wiki                                     │
│  🔧 落兵台                                   │
│  🔀 GitLab                                   │
└─────────────────────────────────────────────┘


## 成功标准

- ✅ @ 触发菜单正常显示
- ✅ 资源选择后标签显示在输入框上方
- ✅ 标签样式正确（颜色、图标、布局）
- ✅ 可以删除已选资源
- ✅ 搜索和过滤功能正常
- ✅ 标签页切换正常
- ✅ 在首页和任务拆解页都能正常使用
